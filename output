
--------------------------------------------------------------------------------
-- This section shows a sample of the testing that I did for my implementation
-- of Hoare semantics. There are some comments I included with the output to 
-- describe what is happening at some key steps of execution.
--------------------------------------------------------------------------------

Script started on May 20, 2015 11:49:07 AM PDT
sh-3.2$ blitz os -g
Beginning execution...
====================  KPL PROGRAM STARTING  ====================
Initializing Thread Scheduler...
Initializing Thread Manager...
Initializing Frame Manager...


*****  THREAD-MANAGER TEST  *****

1
after wait

NO WAITING THREADS
2
after wait


.......................................removed for brevity...............................

NO WAITING THREADS

after wait

NO WAITING THREADS
815
after wait

NO WAITING THREADS                       -- There are no threads waiting, so Hoare semantics are
                                         -- not being used at this point
after wait

NO WAITING THREADS
2
after wait

NO WAITING THREADS
39165.1718..
before signal

 -- Signaling thread #1 goes to sleep and put on mutex wait list

  Thread "TestThreadManager"    status=RUNNING    (addr of Thread object: 0x000252A4)

after wait
 
 -- Woken thread #1 begins running and eventually releases mutex
 
  Thread "TestThreadManager"    status=RUNNING    (addr of Thread object: 0x0002A40C) 
19.
before signal

 -- This thread was already waiting in line for the mutex and makes a signal call which puts it to sleep and back on the mutex wait list

  Thread "TestThreadManager"    status=RUNNING    (addr of Thread object: 0x00027334) 

after wait

 -- Woken thread #2 begins running and eventually releases mutex

  Thread "TestThreadManager"    status=RUNNING    (addr of Thread object: 0x0001D064)
20......
before signal

 -- Another thread that was already waiting in line for the mutex

  Thread "TestThreadManager"    status=RUNNING    (addr of Thread object: 0x000221CC)

after wait

 -- Woken thread  #3 begins running and eventually releases mutex

  Thread "TestThreadManager"    status=RUNNING    (addr of Thread object: 0x0001E0AC)

after signal

 -- Finally signaling thread #1 regains control of the mutex and continues with it's exeution eventually releasing the mutex

  Thread "TestThreadManager"    status=RUNNING    (addr of Thread object: 0x000252A4)

before signal
  Thread "TestThreadManager"    status=RUNNING    (addr of Thread object: 0x000262EC)

after wait
  Thread "TestThreadManager"    status=RUNNING    (addr of Thread object: 0x0002425C)
.
after signal
  Thread "TestThreadManager"    status=RUNNING    (addr of Thread object: 0x00027334)
.10
before signal
  Thread "TestThreadManager"    status=RUNNING    (addr of Thread object: 0x0001F0F4)

after wait
  Thread "TestThreadManager"    status=RUNNING    (addr of Thread object: 0x0002B454)
.
before signal
  Thread "TestThreadManager"    status=RUNNING    (addr of Thread object: 0x0001C01C)

............................. removed for brevity .......................................

NO WAITING THREADS
18
after wait

NO WAITING THREADS

before signal

NO WAITING THREADS
19^C

............................ aborted for brevity .........................................

*****  Control-C  *****
Done!  The next instruction to execute will be:
                   _Label_124:
004870: 540F0000       push    r0,[--r15]

Entering machine-level debugger...
======================================================
=====                                            =====
=====         The BLITZ Machine Emulator         =====
=====                                            =====
=====  Copyright 2001-2007, Harry H. Porter III  =====
=====                                            =====
======================================================

Enter a command at the prompt.  Type 'quit' to exit or 'help' for
info about commands.
> q
Number of Disk Reads    = 0
Number of Disk Writes   = 0
Instructions Executed   = 1622799
Time Spent Sleeping     = 0
    Total Elapsed Time  = 1622799
sh-3.2$ exit
exit

script done on May 20, 2015 11:49:58 AM PDT

---------------------------------------------------------------------------------
-- Output generated from running the thread/process/frame manager tests in Main.c
---------------------------------------------------------------------------------

Script started on May 20, 2015 12:05:14 PM PDT
sh-3.2$ make
kpl Kernel -unsafe
asm Kernel.s
lddd Runtime.o Switch.o System.o List.o BitMap.o Kernel.o Main.o -o os
sh-3.2$ blitz os -g
Beginning execution...
====================  KPL PROGRAM STARTING  ====================
Initializing Thread Scheduler...
Initializing Thread Manager...
Initializing Frame Manager...


*****  THREAD-MANAGER TEST  *****

123.4.56.78192.10....11..412.313651489.21151617..18.19720.10...11.....4.12......3.615.13159.168.1417192182071011....4.12.........3...13.1565.919171.2188141620.10711.4.12..........3...13...156951918148117.201016.21174.........12...3...1513.89.61.181719520.1410216.11.7.4......12..3.15...8139..6.11814.175.2010.1619.2117.......4...12.314.15.13..8517920.1186.101921611.........7.4...1214.915.1320.135.618817..1019.......216..114.20714912..1315.5....1...36..18.1017.48..192.16.7.20.11..14.....121315.9.5101384.619.18216.17.......7.20..14.11.15.13129..58.10.64.119....3...18..16.2177.12209..115148.1510.13.6.......411932018.169..2.17.712.....11.148.15.5.10.136...4.1.19....203.1816..14298151757.12.101113........64.1.1920.18163.14.2....98...17..157512.191011.1364...1.....201816.143..28917..15.....7125..19.1013.11.61.420.16..14..318..2..17.98.157.12.519...101311.....6.1.20.4.16.14318.2...17.98..15...712.19.13510.416..11614.1.320.....182178.9...15.7..19..12.1310.532016116..14.......18.171213..71915.....11.1618.17.........

***** THREAD-MANAGER TEST COMPLETED SUCCESSFULLY *****



*****  PROCESS-MANAGER TEST  *****

123.4.56.71892.3.10..11124...61314.57.152.3..8.91617...12184..11011..1920..51413....71562..3.8..91617..12.110.....2011184..719..215.35.14....69110..12..13.820..1611...1972153...18.14.64.9..5.17.12138.16.11..197.2...14.18.110.6.420..5173.....1611.7192..1213..1418...9..648.53..151..1016...7.1213.14.2018..911...176.3..1.15.16101947..2..8...20..11912617135.14.18.......162.81152019..41011......1418..9321612.768......10...4114171518.91320.....11...19.103421.16512..9......1114.719.101731518..13.....9..414.1162718..20......191316.910.414175.11........201261319.21631510......11...9712206.1813414......19.1.11.92.17716203...19..8..12..61.1811513....9.19....817.215161261.4.....3..10..7191892081711.....4.3.2..15.1014571916.....12...41839..215131020..1412...5..18..684.3..97.1417....5...191518.1.8616.119.14..5..13..15..19104.20..38..11.14..5..71312.1517619.2.......316..1411452071..213..1216....81715......10126.....817201918.....110135.....17782012.....116610....1713.158.1.18.16.5.20.17.13...15.18......17..520.18.15.....

***** PROCESS-MANAGER TEST COMPLETED SUCCESSFULLY *****



*****  FRAME-MANAGER TEST  *****

1234567.8.910....213.5...74.689.10...2..15..3.746.9..810...2..15.3.7496.8..10..2.51374..9...6.8.210.513..7.4..968....2.510.13.7.4...698.2.510..1.3.7.4..69.8.2.5..101.3..74.6.9.8.2.5.10.1.3.7.4.6.9.82..510..13..7.46.9.8..25.10..13.7..46..98.2..510..1.37..46..98..25..101..3.74..69..82..5.101.3.7.4.6.9.8.2.5.10.1.3.7.4.6.9.8.2.5.10.1.3.7.4.6.9.8.2.5.10.1.3.7.4.6.9.8.2.5.10.1.3.7.4.6.9.8.2.5.10.1.3.7.4.6.9...258.......1374.1096.2.5.8..13..7..4...10.96.825..1.3...7.10.4..8962.5.1.3..1074.89.6.2..5.1.310.7.4..8.69..2.51.3..10.74.8.6.9.2.5..13.10.7.4.8.6.9.2.5.1.3.10.7.4.8.6.9.2.5.1.3.10.7.4.8.69.2..51..103.7..48..69..25.1..103..74..86..92.5.1.10.3.7.4.8.6.9.2.5..110.3.7.4..86.9.2.5.1.10.3.7.4.8.6.9.2.5.1.10.3.7.4.8.6.9.2.5.1.10.3.7.4.8.6.9.2.5.1.10.3.7.4.8.6.9.2.5.1.10.3.7.4.8.6.9.2.5.1.10.3.7.4.8.6...2.519......37.64810.25....1.39.76...4.10825...13.9....7.6104.825....1.93.76.10.4..82...51.93.7.6..10.84.2.5.1.9..3.7.6.810.42...51.9.3.7..68.10.4.2.5.1.9.3.7.6.8.10.4.2.5.1.9.3.7.6.8.104.2.5.1.9..37.6..810.4.2..51.9.3.7.6.8.10.4.2.5.1.9.3.7.6.8.10.4.2.5.1.9..37.6.8.10.4.2.5..19.3.7.6.8.10.4.2.5.1.9.3.7.6.8.10.4.2.5.1.9.3.7.6.8.10.4.2.5.1.9.3.7.6.8.10.4.2.5.1.9.3.7.6.8.10.4.2.5.1.9.3.7.6.8.10....2541.....37869....25104..1.3.7..8.6.9.2.105.41.....78369..2...10451....78.369..2..10.45.1.7..8.369..2.10..4.15.78...36..9.210.41..57..8.3.69..210.4.1..57..83..69..2.104.1.5..7.83..6.9.2.104.1.5.7..83.6.9.2.10.4.1.5..78.3.6.9..102.4.1.5.7.8.3.6.9.10.2.4.1.5.7.8.3.6..910..24.1.5.7.8.3.6.9.10.2.4.1.5.7.8.3.6.9.10.2.4.1.5.7.8.3.6.9.10.2.4.1.5.7.8.3.6.9.10.2.4.1.5.7.8.3.6.9.10.2.4.1.5.7.8.3.6.9..210....157...4863..29.....514710....8.623...9541..710..8.6.2.39...5.14..7108..26..3.9.5..1.4710..82..6..39.5.1..4.107.82...63.9.51..4.10.78.2..63.9..51..410..78.2.6..39..5.14..107.8.2..6.39.5.1.4.10.7.8.2.6.3.9.5.1.4.10.7.8.2.6.3.9.5.1.4.10.7.8.2.6..39.5.1.4.10.7.8.2..63.9.5.1.4.10.7.8.2.6.3.9.5.1.4.10.7.8.2.6.3.9.5.1.4.10.7.8.2.6.3.9.5.1.4.10.7.8.2.6.3.9.5.1.4.10.7.8..6.3.9...4.10.....9..10..

Here is a histogram showing how many times each frame was used:
  0:  *******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
  1:  *******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
  2:  *******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************
  3:  *****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************

................................................ removed for brevity .............................................

  21:  *************************************************************************************************************************************************
  22:  ************************************************************************************************************************
  23:  ********************************************************************************************************
  24:  ************************************************************************
  25:  ***********************************************************
  26:  *********************************


***** FRAME-MANAGER TEST COMPLETED SUCCESSFULLY *****


====================  KPL PROGRAM TERMINATION  ====================

****  A 'debug' instruction was encountered  *****
Done!  The next instruction to execute will be:
001078: C0100000       sethi   0x0000,r1        ! 0x00001088 = 4232 (noGoMessage)

Entering machine-level debugger...
======================================================
=====                                            =====
=====         The BLITZ Machine Emulator         =====
=====                                            =====
=====  Copyright 2001-2007, Harry H. Porter III  =====
=====                                            =====
======================================================

Enter a command at the prompt.  Type 'quit' to exit or 'help' for
info about commands.
> ^[[A    q
Number of Disk Reads    = 0
Number of Disk Writes   = 0
Instructions Executed   = 83774101
Time Spent Sleeping     = 0
    Total Elapsed Time  = 83774101
sh-3.2$ exit
exit

script done on May 20, 2015 12:07:31 PM PDT
